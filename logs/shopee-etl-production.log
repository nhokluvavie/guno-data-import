2025-08-13 11:02:34.767 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9278 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:02:34.771 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:02:35.533 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:02:35.849 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 301 ms. Found 11 JPA repository interfaces.
2025-08-13 11:03:55.484 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9297 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:03:55.486 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:03:56.148 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:03:56.428 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 267 ms. Found 11 JPA repository interfaces.
2025-08-13 11:03:57.435 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:03:57.544 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:03:57.602 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:03:58.023 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:03:58.063 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:03:58.581 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@333d44f6
2025-08-13 11:03:58.584 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:03:58.692 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:04:00.352 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:04:00.356 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:04:00.416 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:04:00.749 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:04:02.289 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:04:02.301 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:04:02.309 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:04:02.309 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:04:02.309 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:04:02.333 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:04:02.333 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:04:02.333 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:04:02.333 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:04:03.014 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:04:03.023 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 8.262 seconds (process running for 9.33)
2025-08-13 11:04:03.025 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:03.026 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:04:03.028 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:03.029 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:04:03.529 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:04:03.529 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:04:03.529 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:04:03.530 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:04:03.531 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:04:03.531 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:04:03.532 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:04:03.543 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:04:07.577 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 11:04:07.577 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9455
2025-08-13 11:04:07.578 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 11:04:07.578 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:04:13.349 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 11:04:13.350 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 11:04:14.355 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 11:04:21.697 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 2: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 11:04:21.704 [main] ERROR [c.g.etl.service.FacebookApiService] - Facebook API call failed after 2 attempts
2025-08-13 11:04:21.704 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch Facebook orders for date 2025-08-12: Facebook API call failed after 2 attempts
2025-08-13 11:04:21.705 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch all Facebook orders for date 2025-08-12: Facebook API call failed for date: 2025-08-12
2025-08-13 11:04:21.705 [main] ERROR [c.g.etl.service.FacebookEtlService] - Facebook ETL process failed for date 2025-08-12: Failed to fetch all orders
2025-08-13 11:04:21.705 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üì• API Response: 0 total orders
2025-08-13 11:04:21.705 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚úÖ Processed: 0 orders
2025-08-13 11:04:21.705 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üìà Success Rate: 0.0%
2025-08-13 11:04:21.706 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚è±Ô∏è Duration: 18174 ms
2025-08-13 11:04:21.706 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üíæ Facebook Result: ‚ùå FAILED
2025-08-13 11:04:21.706 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚úÖ Processed 1 platform(s)
2025-08-13 11:04:21.706 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 3: Database State AFTER
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìà MULTI-PLATFORM TEST RESULTS
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Test Date: 2025-08-12
2025-08-13 11:04:21.848 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform(s): Facebook
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä Database Changes:
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070 ‚Üí 2070 (+0)
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889 ‚Üí 1889 (+0)
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ùå Result: FAILED
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üîß Check configuration and logs above
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üí° To test different configurations:
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìù Edit: src/test/resources/test-config.properties
2025-08-13 11:04:21.849 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üõí Shopee: test.shopee.enabled=true, test.platform=SHOPEE
2025-08-13 11:04:21.850 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üì± TikTok: test.tiktok.enabled=true, test.platform=TIKTOK
2025-08-13 11:04:21.850 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Facebook: test.facebook.enabled=true, test.platform=FACEBOOK
2025-08-13 11:04:21.850 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üåê All: test.platform=ALL (enable all desired platforms)
2025-08-13 11:04:21.850 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    ‚ñ∂Ô∏è  Re-run: ConfigBasedEtlTest
2025-08-13 11:04:21.850 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:04:21.853 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 11:04:21.854 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 11:04:22.219 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 11:04:22.220 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 11:04:22.518 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 11:04:22.518 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 11:04:22.969 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 11:04:22.970 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 11:04:22.998 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:04:22.999 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 11:04:22.999 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:04:22.999 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 11:04:22.999 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 11:04:23.000 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 11:04:23.006 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 11:04:23.007 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:04:23.008 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 11:04:23.009 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:14:33.560 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Starting FacebookDebugTest using Java 21.0.7 with PID 9361 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:14:33.562 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - The following 1 profile is active: "test"
2025-08-13 11:14:34.228 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:14:34.495 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 256 ms. Found 11 JPA repository interfaces.
2025-08-13 11:14:35.404 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:14:35.474 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:14:35.521 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:14:35.825 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:14:35.856 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:14:36.296 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7dd45c93
2025-08-13 11:14:36.297 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:14:36.371 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:14:37.896 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:14:37.899 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:14:37.946 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:14:37.946 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:14:37.947 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:14:37.947 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:14:37.959 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:14:38.323 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:14:39.769 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:14:39.787 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:14:39.797 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:14:39.797 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:14:39.797 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:14:39.821 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:14:39.821 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:14:39.821 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:14:39.821 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:14:42.529 [main] WARN  [o.s.b.w.r.c.AnnotationConfigReactiveWebServerApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-08-13 11:14:42.531 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:14:42.534 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 11:14:42.539 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 11:14:42.550 [main] INFO  [o.s.b.a.l.ConditionEvaluationReportLogger] - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-08-13 11:14:42.585 [main] ERROR [o.s.b.d.LoggingFailureAnalysisReporter] - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-08-13 11:15:25.277 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Starting FacebookDebugTest using Java 21.0.7 with PID 9368 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:15:25.279 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - The following 1 profile is active: "test"
2025-08-13 11:15:25.911 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:15:26.143 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 221 ms. Found 11 JPA repository interfaces.
2025-08-13 11:15:27.010 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:15:27.086 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:15:27.129 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:15:27.411 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:15:27.439 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:15:28.196 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@374b6e33
2025-08-13 11:15:28.197 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:15:28.370 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:15:29.544 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:15:29.547 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:15:29.583 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:15:29.583 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:15:29.583 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:15:29.583 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:15:29.597 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:15:29.880 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:15:31.222 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:15:31.240 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:15:31.253 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:15:31.254 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:15:31.254 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:15:31.275 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:15:31.276 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:15:31.276 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:15:31.276 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:15:31.787 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:15:31.795 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Started FacebookDebugTest in 7.06 seconds (process running for 7.874)
2025-08-13 11:15:31.798 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:15:31.798 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç FACEBOOK API DEBUG ANALYSIS
2025-08-13 11:15:31.798 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:15:31.798 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÖ Testing with date: 2025-08-12
2025-08-13 11:15:31.798 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîó Step 1: Testing API connectivity...
2025-08-13 11:15:31.801 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üåê Testing URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search?date=2025-08-12&page=1&limit=1
2025-08-13 11:15:31.802 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Headers: [Content-Type:"application/json", x-webhook-api-key:"iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr"]
2025-08-13 11:15:32.612 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ‚úÖ HTTP Status: 200 OK
2025-08-13 11:15:32.612 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Content Type: application/json;charset=utf-8
2025-08-13 11:15:32.612 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìê Content Length: 13690
2025-08-13 11:15:32.612 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì• Step 2: Fetching raw API response...
2025-08-13 11:15:33.042 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Raw JSON Response (first 500 chars):
2025-08-13 11:15:33.042 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - {"status":1,"message":"ok","code":200,"data":{"orders":[{"id":"02305672-7a8e-48a7-9c66-86e7078c3721","nhanh_app_id":75819,"order_id":"579907854145849404","shop_id":2443210,"status":3,"data":{"id":"579907854145849404","cod":252535,"tax":0,"cash":0,"link":null,"note":"","page":{"id":"tts_7494894764958125052","name":"GUNO Vi·ªát Nam","username":null},"tags":[],"type":"orders","ad_id":null,"items":[{"id":5813871867,"note":null,"quantity":1,"components":null,"product_id":"127891e8-599a-48ba-b515-a58c95...
2025-08-13 11:15:33.043 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 3: Analyzing JSON structure...
2025-08-13 11:15:33.075 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèóÔ∏è JSON Structure Analysis:
2025-08-13 11:15:33.075 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Root Type: OBJECT
2025-08-13 11:15:33.075 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Object: true
2025-08-13 11:15:33.075 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: false
2025-08-13 11:15:33.076 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Root Level Fields:
2025-08-13 11:15:33.093 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (1)
2025-08-13 11:15:33.094 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - message: STRING ("ok")
2025-08-13 11:15:33.095 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - code: NUMBER (200)
2025-08-13 11:15:33.095 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{3 fields})
2025-08-13 11:15:33.095 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ status: NUMBER (1)
2025-08-13 11:15:33.095 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ message: STRING ("ok")
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ code: NUMBER (200)
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ data: OBJECT (object{3 fields})
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Data Field Analysis:
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Data Object Fields:
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - orders: ARRAY (array[5])
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - count: NUMBER (9437)
2025-08-13 11:15:33.096 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: NUMBER (1)
2025-08-13 11:15:33.097 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì¶ Orders Array Analysis:
2025-08-13 11:15:33.097 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: true
2025-08-13 11:15:33.097 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Array Size: 5
2025-08-13 11:15:33.097 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã First Order Fields:
2025-08-13 11:15:33.097 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("02305672-7a8e-48a7-9...")
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_app_id: NUMBER (75819)
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - order_id: STRING ("579907854145849404")
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{99 fields})
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_order_id: NULL (null)
2025-08-13 11:15:33.098 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - source: STRING ("Tiktok")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - last_synced: NULL (null)
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - inserted_at: STRING ("2025-01-23T14:20:13....")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updated_at: STRING ("2025-08-12T12:30:37....")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - createdAt: STRING ("2025-08-12T12:30:23....")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updatedAt: STRING ("2025-08-12T12:30:39....")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Order Data Field Analysis:
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Order Data Fields (first 20):
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("579907854145849404")
2025-08-13 11:15:33.099 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cod: NUMBER (252535)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tax: NUMBER (0)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cash: NUMBER (0)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - link: NULL (null)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - note: STRING ("")
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: OBJECT (object{3 fields})
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tags: ARRAY (array[0])
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - type: STRING ("orders")
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - ad_id: NULL (null)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - items: ARRAY (array[1])
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - is_smc: BOOLEAN (false)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:15:33.100 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - account: STRING ("10136")
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - creator: NULL (null)
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page_id: STRING ("tts_7494894764958125...")
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - partner: OBJECT (object{23 fields})
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - post_id: NULL (null)
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - prepaid: NUMBER (0)
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ id: STRING ("579907854145849404")
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚ùå total: MISSING
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ cod: NUMBER (252535)
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ items: ARRAY (array[1])
2025-08-13 11:15:33.101 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ customer: OBJECT (object{38 fields})
2025-08-13 11:15:33.102 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 4: Checking DTO compatibility...
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç DTO Compatibility Check:
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookApiResponse fields:
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      status: ‚úÖ (NUMBER)
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      message: ‚úÖ (STRING)
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      code: ‚úÖ (NUMBER)
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      data: ‚úÖ (OBJECT)
2025-08-13 11:15:33.104 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookDataWrapper fields:
2025-08-13 11:15:33.105 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      orders: ‚úÖ (ARRAY)
2025-08-13 11:15:33.105 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      count: ‚úÖ (NUMBER)
2025-08-13 11:15:33.105 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      page: ‚úÖ (NUMBER)
2025-08-13 11:15:33.105 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Step 5: Recommendations...
2025-08-13 11:15:33.106 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Recommendations:
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üè∑Ô∏è Ensure all DTO fields have @JsonProperty annotations
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üß™ Consider using @JsonIgnoreProperties(ignoreUnknown = true)
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üîÑ Test with smaller response first (limit=1)
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèÅ DEBUG ANALYSIS COMPLETED
2025-08-13 11:15:33.107 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:15:33.107 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:15:33.107 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:15:33.108 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:15:33.110 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:15:33.111 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:15:33.111 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:15:33.111 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:15:33.111 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:15:33.549 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:15:33.549 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:15:33.549 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:15:33.549 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:15:33.550 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:15:33.550 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:15:33.550 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:15:33.550 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:16:08.773 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Starting FacebookDebugTest using Java 21.0.7 with PID 9378 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:16:08.775 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - The following 1 profile is active: "test"
2025-08-13 11:16:09.310 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:16:09.463 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 146 ms. Found 11 JPA repository interfaces.
2025-08-13 11:16:10.178 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:16:10.225 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:16:10.253 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:16:10.457 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:16:10.476 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:16:11.204 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5885e231
2025-08-13 11:16:11.209 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:16:11.287 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:16:12.588 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:16:12.590 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:16:12.624 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:16:12.624 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:16:12.624 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:16:12.624 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:16:12.627 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:16:12.627 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:16:12.627 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:16:12.912 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:16:13.473 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:16:14.325 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:16:14.334 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:16:14.359 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:16:14.360 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:16:14.360 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:16:14.360 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:16:14.978 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:16:14.987 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Started FacebookDebugTest in 6.713 seconds (process running for 7.445)
2025-08-13 11:16:14.989 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:16:14.989 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç FACEBOOK API DEBUG ANALYSIS
2025-08-13 11:16:14.989 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:16:14.989 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÖ Testing with date: 2025-08-12
2025-08-13 11:16:14.989 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîó Step 1: Testing API connectivity...
2025-08-13 11:16:14.992 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üåê Testing URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search?date=2025-08-12&page=1&limit=1
2025-08-13 11:16:14.992 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Headers: [Content-Type:"application/json", x-webhook-api-key:"iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr"]
2025-08-13 11:16:15.592 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ‚úÖ HTTP Status: 200 OK
2025-08-13 11:16:15.593 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Content Type: application/json;charset=utf-8
2025-08-13 11:16:15.593 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìê Content Length: 13690
2025-08-13 11:16:15.593 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì• Step 2: Fetching raw API response...
2025-08-13 11:16:15.918 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Raw JSON Response (first 500 chars):
2025-08-13 11:16:15.919 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - {"status":1,"message":"ok","code":200,"data":{"orders":[{"id":"02305672-7a8e-48a7-9c66-86e7078c3721","nhanh_app_id":75819,"order_id":"579907854145849404","shop_id":2443210,"status":3,"data":{"id":"579907854145849404","cod":252535,"tax":0,"cash":0,"link":null,"note":"","page":{"id":"tts_7494894764958125052","name":"GUNO Vi·ªát Nam","username":null},"tags":[],"type":"orders","ad_id":null,"items":[{"id":5813871867,"note":null,"quantity":1,"components":null,"product_id":"127891e8-599a-48ba-b515-a58c95...
2025-08-13 11:16:15.919 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 3: Analyzing JSON structure...
2025-08-13 11:16:15.947 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèóÔ∏è JSON Structure Analysis:
2025-08-13 11:16:15.948 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Root Type: OBJECT
2025-08-13 11:16:15.948 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Object: true
2025-08-13 11:16:15.948 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: false
2025-08-13 11:16:15.949 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Root Level Fields:
2025-08-13 11:16:15.967 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (1)
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - message: STRING ("ok")
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - code: NUMBER (200)
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{3 fields})
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ status: NUMBER (1)
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ message: STRING ("ok")
2025-08-13 11:16:15.968 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ code: NUMBER (200)
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ data: OBJECT (object{3 fields})
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Data Field Analysis:
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Data Object Fields:
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - orders: ARRAY (array[5])
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - count: NUMBER (9434)
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: NUMBER (1)
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì¶ Orders Array Analysis:
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: true
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Array Size: 5
2025-08-13 11:16:15.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã First Order Fields:
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("02305672-7a8e-48a7-9...")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_app_id: NUMBER (75819)
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - order_id: STRING ("579907854145849404")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{99 fields})
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_order_id: NULL (null)
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - source: STRING ("Tiktok")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - last_synced: NULL (null)
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - inserted_at: STRING ("2025-01-23T14:20:13....")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updated_at: STRING ("2025-08-12T12:30:37....")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - createdAt: STRING ("2025-08-12T12:30:23....")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updatedAt: STRING ("2025-08-12T12:30:39....")
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Order Data Field Analysis:
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Order Data Fields (first 20):
2025-08-13 11:16:15.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("579907854145849404")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cod: NUMBER (252535)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tax: NUMBER (0)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cash: NUMBER (0)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - link: NULL (null)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - note: STRING ("")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: OBJECT (object{3 fields})
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tags: ARRAY (array[0])
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - type: STRING ("orders")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - ad_id: NULL (null)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - items: ARRAY (array[1])
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - is_smc: BOOLEAN (false)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - account: STRING ("10136")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - creator: NULL (null)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page_id: STRING ("tts_7494894764958125...")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - partner: OBJECT (object{23 fields})
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - post_id: NULL (null)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - prepaid: NUMBER (0)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ id: STRING ("579907854145849404")
2025-08-13 11:16:15.971 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚ùå total: MISSING
2025-08-13 11:16:15.972 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ cod: NUMBER (252535)
2025-08-13 11:16:15.972 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ items: ARRAY (array[1])
2025-08-13 11:16:15.972 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ customer: OBJECT (object{38 fields})
2025-08-13 11:16:15.972 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 4: Checking DTO compatibility...
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç DTO Compatibility Check:
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookApiResponse fields:
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      status: ‚úÖ (NUMBER)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      message: ‚úÖ (STRING)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      code: ‚úÖ (NUMBER)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      data: ‚úÖ (OBJECT)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookDataWrapper fields:
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      orders: ‚úÖ (ARRAY)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      count: ‚úÖ (NUMBER)
2025-08-13 11:16:15.974 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      page: ‚úÖ (NUMBER)
2025-08-13 11:16:15.975 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Step 5: Recommendations...
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Recommendations:
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üè∑Ô∏è Ensure all DTO fields have @JsonProperty annotations
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üß™ Consider using @JsonIgnoreProperties(ignoreUnknown = true)
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üîÑ Test with smaller response first (limit=1)
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèÅ DEBUG ANALYSIS COMPLETED
2025-08-13 11:16:15.976 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:16:16.012 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 11:16:16.012 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 11:16:16.592 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 11:16:16.592 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 11:16:17.092 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 11:16:17.093 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 11:16:17.424 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 11:16:17.424 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 11:16:17.455 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 11:16:17.456 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 11:16:17.457 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.457 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 11:16:17.457 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:16:17.458 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 11:16:17.458 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 11:16:17.459 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 11:16:17.460 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:16:17.460 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:16:17.460 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 11:16:17.460 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:33:22.601 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:33:22.618 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 11:33:22.622 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 11:33:28.398 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Starting FacebookDebugTest using Java 21.0.7 with PID 9440 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:33:28.400 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - The following 1 profile is active: "test"
2025-08-13 11:33:29.077 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:33:29.289 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 205 ms. Found 11 JPA repository interfaces.
2025-08-13 11:33:30.175 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:33:30.229 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:33:30.270 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:33:30.511 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:33:30.534 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:33:31.998 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1d2def55
2025-08-13 11:33:31.999 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:33:32.102 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:33:33.513 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:33:33.515 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:33:33.551 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:33:33.551 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:33:33.551 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:33:33.551 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:33:33.554 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:33:33.554 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:33:33.554 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:33:33.848 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:33:34.419 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:33:35.332 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:33:35.344 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:33:35.365 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:33:35.365 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:33:35.365 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:33:35.366 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:33:35.944 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:33:35.963 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Started FacebookDebugTest in 8.186 seconds (process running for 9.158)
2025-08-13 11:33:35.965 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:33:35.966 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç FACEBOOK API DEBUG ANALYSIS
2025-08-13 11:33:35.966 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:33:35.966 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÖ Testing with date: 2025-08-12
2025-08-13 11:33:35.966 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîó Step 1: Testing API connectivity...
2025-08-13 11:33:35.969 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üåê Testing URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search?date=2025-08-12&page=1&limit=1
2025-08-13 11:33:35.970 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Headers: [Content-Type:"application/json", x-webhook-api-key:"iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr"]
2025-08-13 11:33:36.809 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ‚úÖ HTTP Status: 200 OK
2025-08-13 11:33:36.809 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Content Type: application/json;charset=utf-8
2025-08-13 11:33:36.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìê Content Length: 13690
2025-08-13 11:33:36.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì• Step 2: Fetching raw API response...
2025-08-13 11:33:37.091 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Raw JSON Response (first 500 chars):
2025-08-13 11:33:37.092 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - {"status":1,"message":"ok","code":200,"data":{"orders":[{"id":"02305672-7a8e-48a7-9c66-86e7078c3721","nhanh_app_id":75819,"order_id":"579907854145849404","shop_id":2443210,"status":3,"data":{"id":"579907854145849404","cod":252535,"tax":0,"cash":0,"link":null,"note":"","page":{"id":"tts_7494894764958125052","name":"GUNO Vi·ªát Nam","username":null},"tags":[],"type":"orders","ad_id":null,"items":[{"id":5813871867,"note":null,"quantity":1,"components":null,"product_id":"127891e8-599a-48ba-b515-a58c95...
2025-08-13 11:33:37.093 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 3: Analyzing JSON structure...
2025-08-13 11:33:37.123 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèóÔ∏è JSON Structure Analysis:
2025-08-13 11:33:37.124 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Root Type: OBJECT
2025-08-13 11:33:37.124 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Object: true
2025-08-13 11:33:37.124 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: false
2025-08-13 11:33:37.125 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Root Level Fields:
2025-08-13 11:33:37.143 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (1)
2025-08-13 11:33:37.144 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - message: STRING ("ok")
2025-08-13 11:33:37.144 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - code: NUMBER (200)
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{3 fields})
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ status: NUMBER (1)
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ message: STRING ("ok")
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ code: NUMBER (200)
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ data: OBJECT (object{3 fields})
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Data Field Analysis:
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:33:37.145 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Data Object Fields:
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - orders: ARRAY (array[5])
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - count: NUMBER (9373)
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: NUMBER (1)
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì¶ Orders Array Analysis:
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: true
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Array Size: 5
2025-08-13 11:33:37.146 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã First Order Fields:
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("02305672-7a8e-48a7-9...")
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_app_id: NUMBER (75819)
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - order_id: STRING ("579907854145849404")
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{99 fields})
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_order_id: NULL (null)
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - source: STRING ("Tiktok")
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - last_synced: NULL (null)
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - inserted_at: STRING ("2025-01-23T14:20:13....")
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updated_at: STRING ("2025-08-12T12:30:37....")
2025-08-13 11:33:37.147 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - createdAt: STRING ("2025-08-12T12:30:23....")
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updatedAt: STRING ("2025-08-12T12:30:39....")
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Order Data Field Analysis:
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Order Data Fields (first 20):
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("579907854145849404")
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cod: NUMBER (252535)
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tax: NUMBER (0)
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cash: NUMBER (0)
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - link: NULL (null)
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - note: STRING ("")
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: OBJECT (object{3 fields})
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tags: ARRAY (array[0])
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - type: STRING ("orders")
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - ad_id: NULL (null)
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - items: ARRAY (array[1])
2025-08-13 11:33:37.148 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - is_smc: BOOLEAN (false)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - account: STRING ("10136")
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - creator: NULL (null)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page_id: STRING ("tts_7494894764958125...")
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - partner: OBJECT (object{23 fields})
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - post_id: NULL (null)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - prepaid: NUMBER (0)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ id: STRING ("579907854145849404")
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚ùå total: MISSING
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ cod: NUMBER (252535)
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ items: ARRAY (array[1])
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ customer: OBJECT (object{38 fields})
2025-08-13 11:33:37.149 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 4: Checking DTO compatibility...
2025-08-13 11:33:37.152 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç DTO Compatibility Check:
2025-08-13 11:33:37.152 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookApiResponse fields:
2025-08-13 11:33:37.152 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      status: ‚úÖ (NUMBER)
2025-08-13 11:33:37.152 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      message: ‚úÖ (STRING)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      code: ‚úÖ (NUMBER)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      data: ‚úÖ (OBJECT)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookDataWrapper fields:
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      orders: ‚úÖ (ARRAY)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      count: ‚úÖ (NUMBER)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      page: ‚úÖ (NUMBER)
2025-08-13 11:33:37.153 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Step 5: Recommendations...
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Recommendations:
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üè∑Ô∏è Ensure all DTO fields have @JsonProperty annotations
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üß™ Consider using @JsonIgnoreProperties(ignoreUnknown = true)
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üîÑ Test with smaller response first (limit=1)
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèÅ DEBUG ANALYSIS COMPLETED
2025-08-13 11:33:37.155 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:33:37.188 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 11:33:37.188 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 11:33:37.759 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 11:33:37.760 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 11:33:38.658 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 11:33:38.658 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 11:33:38.823 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 11:33:38.824 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 11:33:38.853 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 11:33:38.854 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 11:33:38.855 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 11:33:38.855 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 11:33:38.855 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.855 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 11:33:38.855 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:33:38.856 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 11:33:38.856 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 11:33:38.856 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 11:33:38.856 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:33:38.857 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 11:33:38.858 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:33:54.984 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:33:54.993 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 11:33:54.995 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 11:35:15.762 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9453 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:35:15.765 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:35:16.380 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:35:16.589 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 199 ms. Found 11 JPA repository interfaces.
2025-08-13 11:35:17.418 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:35:17.479 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:35:17.514 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:35:17.739 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:35:17.763 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:35:18.189 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@350bbd5d
2025-08-13 11:35:18.190 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:35:18.269 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:35:19.569 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:35:19.572 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:35:19.627 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:35:19.920 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:35:21.345 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:35:21.366 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:35:21.376 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:35:21.376 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:35:21.376 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:35:21.389 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:35:21.390 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:35:21.390 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:35:21.390 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:35:21.399 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:35:21.399 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:35:21.399 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:35:21.399 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:35:21.973 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:35:21.982 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 6.739 seconds (process running for 7.459)
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:21.984 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:21.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:35:22.212 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:35:22.212 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:35:22.212 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:35:22.212 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:35:22.213 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:35:22.213 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:35:22.213 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:35:22.221 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:35:28.365 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 11:35:28.371 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9368
2025-08-13 11:35:28.371 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 11:35:28.371 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:35:39.618 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 11:35:39.618 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 11:35:40.622 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 11:35:50.787 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 2: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 11:35:50.787 [main] ERROR [c.g.etl.service.FacebookApiService] - Facebook API call failed after 2 attempts
2025-08-13 11:35:50.787 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch Facebook orders for date 2025-08-12: Facebook API call failed after 2 attempts
2025-08-13 11:35:50.787 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch all Facebook orders for date 2025-08-12: Facebook API call failed for date: 2025-08-12
2025-08-13 11:35:50.787 [main] ERROR [c.g.etl.service.FacebookEtlService] - Facebook ETL process failed for date 2025-08-12: Failed to fetch all orders
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üì• API Response: 0 total orders
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚úÖ Processed: 0 orders
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üìà Success Rate: 0.0%
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚è±Ô∏è Duration: 28574 ms
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üíæ Facebook Result: ‚ùå FAILED
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚úÖ Processed 1 platform(s)
2025-08-13 11:35:50.788 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 3: Database State AFTER
2025-08-13 11:35:50.929 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:35:50.929 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:35:50.929 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:50.929 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìà MULTI-PLATFORM TEST RESULTS
2025-08-13 11:35:50.929 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Test Date: 2025-08-12
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform(s): Facebook
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä Database Changes:
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070 ‚Üí 2070 (+0)
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889 ‚Üí 1889 (+0)
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ùå Result: FAILED
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üîß Check configuration and logs above
2025-08-13 11:35:50.930 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üí° To test different configurations:
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìù Edit: src/test/resources/test-config.properties
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üõí Shopee: test.shopee.enabled=true, test.platform=SHOPEE
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üì± TikTok: test.tiktok.enabled=true, test.platform=TIKTOK
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Facebook: test.facebook.enabled=true, test.platform=FACEBOOK
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üåê All: test.platform=ALL (enable all desired platforms)
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    ‚ñ∂Ô∏è  Re-run: ConfigBasedEtlTest
2025-08-13 11:35:50.931 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:35:50.932 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 11:35:50.933 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 11:35:51.498 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 11:35:51.499 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 11:35:51.779 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 11:35:51.779 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 11:35:51.942 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 11:35:51.942 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 11:35:51.971 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 11:35:51.972 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.973 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 11:35:51.974 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:35:51.975 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 11:35:51.976 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 11:35:51.976 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 11:35:51.976 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.976 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.977 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:35:51.978 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:35:51.979 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 11:35:51.979 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:38:36.522 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:38:36.533 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 11:38:36.535 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 11:38:44.613 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9466 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:38:44.615 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:38:45.170 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:38:45.364 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 187 ms. Found 11 JPA repository interfaces.
2025-08-13 11:38:46.143 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:38:46.199 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:38:46.233 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:38:46.480 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:38:46.501 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:38:47.099 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@731db93f
2025-08-13 11:38:47.101 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:38:47.181 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:38:48.609 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:38:48.611 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:38:48.655 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:38:48.951 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:38:50.298 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:38:50.314 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:38:50.325 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:38:50.325 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:38:50.325 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:38:50.341 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:38:50.342 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:38:50.342 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:38:50.342 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:38:50.351 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:38:50.351 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:38:50.351 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:38:50.351 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:38:50.925 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:38:50.932 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 6.909 seconds (process running for 7.907)
2025-08-13 11:38:50.934 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:38:50.934 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:38:50.935 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:38:50.936 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:38:50.936 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:38:50.936 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:38:50.937 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:38:51.184 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:38:51.184 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:38:51.185 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:38:51.185 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:38:51.185 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:38:51.185 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:38:51.186 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:38:51.189 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:38:59.609 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 11:38:59.615 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9350
2025-08-13 11:38:59.615 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 11:38:59.615 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:39:12.047 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 11:39:12.047 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 11:39:13.053 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 11:39:46.953 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Starting FacebookDebugTest using Java 21.0.7 with PID 9480 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:39:46.955 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - The following 1 profile is active: "test"
2025-08-13 11:39:47.535 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:39:47.756 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 213 ms. Found 11 JPA repository interfaces.
2025-08-13 11:39:48.572 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:39:48.630 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:39:48.675 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:39:48.911 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:39:48.935 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:39:49.359 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@602298b
2025-08-13 11:39:49.362 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:39:49.427 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:39:50.768 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:39:50.771 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:39:50.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:39:50.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:39:50.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:39:50.810 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:39:50.814 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:39:50.814 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:39:50.814 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:39:51.105 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:39:51.665 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:39:52.526 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:39:52.537 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:39:52.561 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:39:52.561 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:39:52.561 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:39:52.561 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:39:53.159 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:39:53.168 [main] INFO  [c.guno.etl.debug.FacebookDebugTest] - Started FacebookDebugTest in 6.741 seconds (process running for 7.455)
2025-08-13 11:39:53.170 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:39:53.170 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç FACEBOOK API DEBUG ANALYSIS
2025-08-13 11:39:53.170 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:39:53.170 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÖ Testing with date: 2025-08-12
2025-08-13 11:39:53.170 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîó Step 1: Testing API connectivity...
2025-08-13 11:39:53.173 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üåê Testing URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search?date=2025-08-12&page=1&limit=1
2025-08-13 11:39:53.173 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Headers: [Content-Type:"application/json", x-webhook-api-key:"iuKqTys2XUNJOFLhByaH3woWsrLDC5yajHu7dvSe63U34qN57Zi9bNxeMj2FQc9qcn8sgQr"]
2025-08-13 11:39:53.832 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ‚úÖ HTTP Status: 200 OK
2025-08-13 11:39:53.833 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Content Type: application/json;charset=utf-8
2025-08-13 11:39:53.833 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìê Content Length: 13690
2025-08-13 11:39:53.833 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì• Step 2: Fetching raw API response...
2025-08-13 11:39:54.367 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìÑ Raw JSON Response (first 500 chars):
2025-08-13 11:39:54.368 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - {"status":1,"message":"ok","code":200,"data":{"orders":[{"id":"02305672-7a8e-48a7-9c66-86e7078c3721","nhanh_app_id":75819,"order_id":"579907854145849404","shop_id":2443210,"status":3,"data":{"id":"579907854145849404","cod":252535,"tax":0,"cash":0,"link":null,"note":"","page":{"id":"tts_7494894764958125052","name":"GUNO Vi·ªát Nam","username":null},"tags":[],"type":"orders","ad_id":null,"items":[{"id":5813871867,"note":null,"quantity":1,"components":null,"product_id":"127891e8-599a-48ba-b515-a58c95...
2025-08-13 11:39:54.368 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 3: Analyzing JSON structure...
2025-08-13 11:39:54.399 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèóÔ∏è JSON Structure Analysis:
2025-08-13 11:39:54.400 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Root Type: OBJECT
2025-08-13 11:39:54.400 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Object: true
2025-08-13 11:39:54.400 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: false
2025-08-13 11:39:54.400 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Root Level Fields:
2025-08-13 11:39:54.422 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (1)
2025-08-13 11:39:54.422 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - message: STRING ("ok")
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - code: NUMBER (200)
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{3 fields})
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ status: NUMBER (1)
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ message: STRING ("ok")
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ code: NUMBER (200)
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ data: OBJECT (object{3 fields})
2025-08-13 11:39:54.423 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Data Field Analysis:
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Data Object Fields:
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - orders: ARRAY (array[5])
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - count: NUMBER (9348)
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: NUMBER (1)
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üì¶ Orders Array Analysis:
2025-08-13 11:39:54.424 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Is Array: true
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Array Size: 5
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã First Order Fields:
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("02305672-7a8e-48a7-9...")
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_app_id: NUMBER (75819)
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - order_id: STRING ("579907854145849404")
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - data: OBJECT (object{99 fields})
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - nhanh_order_id: NULL (null)
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - source: STRING ("Tiktok")
2025-08-13 11:39:54.425 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - last_synced: NULL (null)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - inserted_at: STRING ("2025-01-23T14:20:13....")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updated_at: STRING ("2025-08-12T12:30:37....")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - createdAt: STRING ("2025-08-12T12:30:23....")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - updatedAt: STRING ("2025-08-12T12:30:39....")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìä Order Data Field Analysis:
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    Data Type: OBJECT
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üìã Order Data Fields (first 20):
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - id: STRING ("579907854145849404")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cod: NUMBER (252535)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tax: NUMBER (0)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - cash: NUMBER (0)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - link: NULL (null)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - note: STRING ("")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page: OBJECT (object{3 fields})
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - tags: ARRAY (array[0])
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - type: STRING ("orders")
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - ad_id: NULL (null)
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - items: ARRAY (array[1])
2025-08-13 11:39:54.426 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - is_smc: BOOLEAN (false)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - status: NUMBER (3)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - account: STRING ("10136")
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - creator: NULL (null)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - page_id: STRING ("tts_7494894764958125...")
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - partner: OBJECT (object{23 fields})
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - post_id: NULL (null)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - prepaid: NUMBER (0)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    - shop_id: NUMBER (2443210)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ id: STRING ("579907854145849404")
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚ùå total: MISSING
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ cod: NUMBER (252535)
2025-08-13 11:39:54.427 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ items: ARRAY (array[1])
2025-08-13 11:39:54.428 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    ‚úÖ customer: OBJECT (object{38 fields})
2025-08-13 11:39:54.428 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç Step 4: Checking DTO compatibility...
2025-08-13 11:39:54.431 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üîç DTO Compatibility Check:
2025-08-13 11:39:54.431 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookApiResponse fields:
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      status: ‚úÖ (NUMBER)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      message: ‚úÖ (STRING)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      code: ‚úÖ (NUMBER)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      data: ‚úÖ (OBJECT)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    FacebookDataWrapper fields:
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      orders: ‚úÖ (ARRAY)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      count: ‚úÖ (NUMBER)
2025-08-13 11:39:54.432 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -      page: ‚úÖ (NUMBER)
2025-08-13 11:39:54.433 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Step 5: Recommendations...
2025-08-13 11:39:54.434 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üí° Recommendations:
2025-08-13 11:39:54.434 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üè∑Ô∏è Ensure all DTO fields have @JsonProperty annotations
2025-08-13 11:39:54.434 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üß™ Consider using @JsonIgnoreProperties(ignoreUnknown = true)
2025-08-13 11:39:54.435 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] -    üîÑ Test with smaller response first (limit=1)
2025-08-13 11:39:54.435 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:39:54.435 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - üèÅ DEBUG ANALYSIS COMPLETED
2025-08-13 11:39:54.435 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - ========================================
2025-08-13 11:39:54.468 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 11:39:54.468 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 11:39:54.841 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 11:39:54.841 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 11:39:55.102 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 11:39:55.102 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 11:39:55.261 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 11:39:55.261 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 11:39:55.289 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:39:55.289 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 11:39:55.289 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 11:39:55.290 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 11:39:55.291 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 11:39:55.293 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 11:39:55.294 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 11:39:55.294 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 11:39:55.294 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:39:55.294 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 11:39:55.294 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 11:47:58.319 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9502 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:47:58.321 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:47:58.987 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:47:59.189 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 194 ms. Found 11 JPA repository interfaces.
2025-08-13 11:48:00.070 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:48:00.139 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:48:00.177 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:48:00.425 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:48:00.453 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:48:00.954 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@419f0ea
2025-08-13 11:48:00.957 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:48:01.023 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:48:02.437 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:48:02.440 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:48:02.487 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:48:02.803 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:48:04.162 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:48:04.187 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:48:04.199 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:48:04.200 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:48:04.200 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:48:04.218 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:48:04.218 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:48:04.218 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:48:04.218 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:48:04.228 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:48:04.228 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:48:04.228 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:48:04.228 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:48:04.815 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:48:04.826 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.1 seconds (process running for 10.17)
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:04.828 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:04.830 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:48:05.069 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:48:05.070 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:48:05.070 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:48:05.070 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:48:05.071 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:48:05.071 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:48:05.071 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:48:05.077 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:48:13.997 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 11:48:14.003 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9319
2025-08-13 11:48:14.003 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 11:48:14.003 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:48:39.608 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9510 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:48:39.610 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:48:40.267 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:48:40.499 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 214 ms. Found 11 JPA repository interfaces.
2025-08-13 11:48:41.429 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:48:41.497 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:48:41.533 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:48:41.809 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:48:41.849 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:48:42.431 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@517a46f3
2025-08-13 11:48:42.433 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:48:42.513 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:48:44.054 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:48:44.057 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:48:44.108 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:48:44.425 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:48:45.890 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:48:45.917 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:48:45.928 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:48:45.928 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:48:45.928 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:48:45.945 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:48:45.945 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:48:45.945 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:48:45.945 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:48:45.957 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:48:45.957 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:48:45.957 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:48:45.957 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:48:46.647 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:48:46.659 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.668 seconds (process running for 9.449)
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:46.662 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:48:46.665 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:48:46.666 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:46.666 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:48:46.666 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:48:46.666 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:48:46.908 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:48:46.908 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:48:46.908 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:48:46.908 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:48:46.909 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:48:46.909 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:48:46.909 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:53:25.368 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m42s830ms).
2025-08-13 11:55:35.343 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m37s909ms).
2025-08-13 11:55:35.371 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:57:50.407 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9550 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 11:57:50.411 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 11:57:51.092 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 11:57:51.334 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 231 ms. Found 11 JPA repository interfaces.
2025-08-13 11:57:52.269 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 11:57:52.343 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 11:57:52.381 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 11:57:52.714 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 11:57:52.755 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 11:57:53.253 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7db47323
2025-08-13 11:57:53.256 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 11:57:53.334 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 11:57:54.750 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 11:57:54.752 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 11:57:54.803 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 11:57:55.117 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 11:57:56.489 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 11:57:56.516 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:57:56.527 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 11:57:56.527 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 11:57:56.527 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 11:57:56.544 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 11:57:56.545 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 11:57:56.545 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 11:57:56.545 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 11:57:56.555 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 11:57:56.555 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 11:57:56.555 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 11:57:56.555 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 11:57:57.183 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 11:57:57.192 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.471 seconds (process running for 9.847)
2025-08-13 11:57:57.194 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:57:57.194 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:57:57.195 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 11:57:57.196 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 11:57:57.197 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 11:57:57.427 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 11:57:57.428 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 11:57:57.428 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 11:57:57.428 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 11:57:57.429 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 11:57:57.429 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 11:57:57.429 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 11:57:57.433 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 11:58:03.449 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 11:58:56.617 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m3s256ms).
2025-08-13 12:00:33.605 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m36s987ms).
2025-08-13 12:00:48.320 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9297
2025-08-13 12:00:55.162 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 12:00:55.164 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 12:01:12.960 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 12:01:12.966 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 12:01:13.970 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 12:01:31.134 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 2: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 12:01:31.135 [main] ERROR [c.g.etl.service.FacebookApiService] - Facebook API call failed after 2 attempts
2025-08-13 12:01:31.136 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch Facebook orders for date 2025-08-12: Facebook API call failed after 2 attempts
2025-08-13 12:02:52.079 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m38s847ms).
2025-08-13 12:02:52.083 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch all Facebook orders for date 2025-08-12: Facebook API call failed for date: 2025-08-12
2025-08-13 12:02:52.084 [main] ERROR [c.g.etl.service.FacebookEtlService] - Facebook ETL process failed for date 2025-08-12: Failed to fetch all orders
2025-08-13 12:02:52.085 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üì• API Response: 0 total orders
2025-08-13 12:02:52.085 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚úÖ Processed: 0 orders
2025-08-13 12:02:52.085 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üìà Success Rate: 0.0%
2025-08-13 12:02:52.085 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚è±Ô∏è Duration: 294655 ms
2025-08-13 12:02:52.085 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üíæ Facebook Result: ‚ùå FAILED
2025-08-13 12:02:52.086 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚úÖ Processed 1 platform(s)
2025-08-13 12:02:52.086 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 3: Database State AFTER
2025-08-13 12:02:52.219 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 12:02:52.220 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 12:02:52.220 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:02:52.220 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìà MULTI-PLATFORM TEST RESULTS
2025-08-13 12:02:52.220 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:02:52.220 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Test Date: 2025-08-12
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform(s): Facebook
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä Database Changes:
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070 ‚Üí 2070 (+0)
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889 ‚Üí 1889 (+0)
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ùå Result: FAILED
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üîß Check configuration and logs above
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üí° To test different configurations:
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìù Edit: src/test/resources/test-config.properties
2025-08-13 12:02:52.221 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üõí Shopee: test.shopee.enabled=true, test.platform=SHOPEE
2025-08-13 12:02:52.222 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üì± TikTok: test.tiktok.enabled=true, test.platform=TIKTOK
2025-08-13 12:02:52.222 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Facebook: test.facebook.enabled=true, test.platform=FACEBOOK
2025-08-13 12:02:52.222 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üåê All: test.platform=ALL (enable all desired platforms)
2025-08-13 12:02:52.222 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    ‚ñ∂Ô∏è  Re-run: ConfigBasedEtlTest
2025-08-13 12:02:52.222 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:02:52.223 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 12:02:52.223 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 12:02:52.555 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 12:02:52.556 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 12:02:52.879 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 12:02:52.879 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 12:02:53.054 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 12:02:53.054 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 12:02:53.083 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:02:53.084 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 12:02:53.084 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:02:53.085 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 12:02:53.085 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 12:02:53.085 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 12:02:53.086 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 12:02:53.086 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.086 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 12:02:53.086 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 12:02:53.086 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 12:02:53.087 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 12:02:53.088 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 12:02:53.088 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 12:02:53.088 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.088 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 12:02:53.088 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 12:02:53.238 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 12:02:53.238 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.239 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 12:02:53.240 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:02:54.248 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:02:54.252 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 12:02:54.254 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 12:04:25.546 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9567 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 12:04:25.548 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 12:04:26.379 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 12:04:26.668 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 280 ms. Found 11 JPA repository interfaces.
2025-08-13 12:04:27.636 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 12:04:27.698 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 12:04:27.734 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 12:04:28.031 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 12:04:28.059 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 12:04:28.585 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@fd4459b
2025-08-13 12:04:28.588 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 12:04:28.666 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 12:04:30.144 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 12:04:30.148 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:04:30.205 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 12:04:30.517 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 12:04:31.987 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 12:04:32.023 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:04:32.033 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 12:04:32.034 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 12:04:32.034 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 12:04:32.046 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 12:04:32.047 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:04:32.047 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 12:04:32.047 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 12:04:32.056 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 12:04:32.056 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 12:04:32.056 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 12:04:32.056 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 12:04:32.709 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 12:04:32.720 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.802 seconds (process running for 9.504)
2025-08-13 12:04:32.724 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:04:32.724 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:04:32.725 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:04:32.727 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 12:04:32.986 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 12:04:32.987 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 12:04:32.987 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 12:04:32.987 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 12:04:32.987 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 12:04:32.987 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 12:05:09.082 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 12:05:09.100 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 12:05:28.551 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 12:05:44.472 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9283
2025-08-13 12:06:00.403 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 12:06:00.404 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 12:06:22.732 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 12:06:22.733 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 12:06:23.739 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 12:06:46.495 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9577 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 12:06:46.497 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 12:06:47.119 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 12:06:47.398 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 267 ms. Found 11 JPA repository interfaces.
2025-08-13 12:06:48.338 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 12:06:48.401 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 12:06:48.438 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 12:06:48.719 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 12:06:48.747 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 12:06:49.220 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@38fb151a
2025-08-13 12:06:49.222 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 12:06:49.290 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 12:06:50.714 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 12:06:50.717 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:06:50.767 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 12:06:51.071 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 12:06:52.503 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 12:06:52.532 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:06:52.544 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 12:06:52.544 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 12:06:52.544 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 12:06:52.560 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 12:06:52.561 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:06:52.561 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 12:06:52.561 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 12:06:52.571 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 12:06:52.571 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 12:06:52.571 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 12:06:52.571 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 12:06:53.332 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 12:06:53.344 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.379 seconds (process running for 9.036)
2025-08-13 12:06:53.347 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:06:53.347 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:06:53.348 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 12:06:53.349 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:06:53.350 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 12:06:53.351 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:06:53.351 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 12:06:53.600 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 12:06:53.600 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 12:06:53.600 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 12:06:53.600 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 12:06:53.600 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 12:06:53.600 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 12:06:56.665 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 1000
2025-08-13 12:07:05.447 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 12:07:31.490 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 1000 Facebook orders for date: 2025-08-12
2025-08-13 12:07:38.955 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 1000 orders, total: 9278
2025-08-13 12:07:41.934 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 1000
2025-08-13 12:08:16.770 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 2
2025-08-13 12:08:35.509 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 12:08:35.512 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 12:08:36.514 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 2
2025-08-13 12:08:59.169 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 2: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 12:08:59.169 [main] ERROR [c.g.etl.service.FacebookApiService] - Facebook API call failed after 2 attempts
2025-08-13 12:19:14.065 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10m22s130ms).
2025-08-13 12:19:14.068 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch Facebook orders for date 2025-08-12: Facebook API call failed after 2 attempts
2025-08-13 12:19:14.075 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch all Facebook orders for date 2025-08-12: Facebook API call failed for date: 2025-08-12
2025-08-13 12:19:14.077 [main] ERROR [c.g.etl.service.FacebookEtlService] - Facebook ETL process failed for date 2025-08-12: Failed to fetch all orders
2025-08-13 12:19:14.078 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üì• API Response: 0 total orders
2025-08-13 12:19:14.079 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚úÖ Processed: 0 orders
2025-08-13 12:19:14.079 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üìà Success Rate: 0.0%
2025-08-13 12:19:14.079 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚è±Ô∏è Duration: 740477 ms
2025-08-13 12:19:14.080 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üíæ Facebook Result: ‚ùå FAILED
2025-08-13 12:19:14.080 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚úÖ Processed 1 platform(s)
2025-08-13 12:19:14.081 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 3: Database State AFTER
2025-08-13 12:19:14.459 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 12:19:14.459 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìà MULTI-PLATFORM TEST RESULTS
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Test Date: 2025-08-12
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform(s): Facebook
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä Database Changes:
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070 ‚Üí 2070 (+0)
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889 ‚Üí 1889 (+0)
2025-08-13 12:19:14.460 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ùå Result: FAILED
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üîß Check configuration and logs above
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üí° To test different configurations:
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìù Edit: src/test/resources/test-config.properties
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üõí Shopee: test.shopee.enabled=true, test.platform=SHOPEE
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üì± TikTok: test.tiktok.enabled=true, test.platform=TIKTOK
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Facebook: test.facebook.enabled=true, test.platform=FACEBOOK
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üåê All: test.platform=ALL (enable all desired platforms)
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    ‚ñ∂Ô∏è  Re-run: ConfigBasedEtlTest
2025-08-13 12:19:14.461 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:14.471 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 12:19:14.471 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 12:19:14.828 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 12:19:14.828 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 12:19:15.099 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 12:19:15.100 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 12:19:15.267 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 12:19:15.267 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 12:19:15.296 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:19:15.296 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 12:19:15.296 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:19:15.297 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 12:19:15.297 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 12:19:15.297 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 12:19:15.303 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 12:19:15.304 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 12:19:15.305 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 12:19:15.305 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 12:19:15.305 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 12:19:15.305 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 12:19:15.305 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 12:19:15.306 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 12:19:15.306 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.306 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 12:19:15.306 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 12:19:15.435 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 12:19:15.435 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 12:19:15.436 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 12:19:15.437 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 12:19:15.438 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:19:15.438 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 12:19:15.438 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 12:19:16.296 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:19:16.306 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 12:19:16.307 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 12:19:20.949 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 9729 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 12:19:20.951 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 12:19:21.573 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 12:19:21.846 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 265 ms. Found 11 JPA repository interfaces.
2025-08-13 12:19:22.874 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 12:19:23.015 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 12:19:23.087 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 12:19:23.540 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 12:19:23.576 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 12:19:24.043 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@59371066
2025-08-13 12:19:24.045 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 12:19:24.115 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 12:19:25.588 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 12:19:25.591 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:19:25.643 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 12:19:25.993 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 12:19:27.429 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 12:19:27.450 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:19:27.459 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 12:19:27.460 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 12:19:27.460 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 12:19:27.475 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 12:19:27.476 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 12:19:27.476 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 12:19:27.476 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 12:19:27.485 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 12:19:27.485 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 12:19:27.485 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 12:19:27.485 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 12:19:28.145 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 12:19:28.155 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 7.768 seconds (process running for 9.891)
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:28.158 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 12:19:28.159 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 12:19:28.160 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 12:19:28.394 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 12:19:28.395 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 12:19:28.395 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 12:19:28.396 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 12:19:28.396 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 12:19:28.396 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 12:19:32.488 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 100
2025-08-13 12:19:32.500 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 12:19:38.164 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 12:19:47.666 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 100 orders, total: 9252
2025-08-13 12:19:52.896 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 100
2025-08-13 12:19:52.903 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 12:19:55.200 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 12:21:12.969 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m18s818ms).
2025-08-13 12:21:12.973 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 2: 100 orders, total: 9252
2025-08-13 12:21:12.976 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 3, limit: 100
2025-08-13 12:21:12.978 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 12:21:14.878 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 12:21:14.878 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 3: 100 orders, total: 9251
2025-08-13 12:21:14.879 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 4, limit: 100
2025-08-13 12:21:14.879 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 12:21:15.160 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 12:21:15.169 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 12:21:15.172 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
2025-08-13 14:19:51.616 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 10026 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 14:19:51.618 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 14:19:52.427 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 14:19:52.711 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 273 ms. Found 11 JPA repository interfaces.
2025-08-13 14:19:53.857 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 14:19:53.938 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 14:19:53.987 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 14:19:54.416 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 14:19:54.443 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 14:19:54.931 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6060146b
2025-08-13 14:19:54.933 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 14:19:55.014 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 14:19:56.689 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 14:19:56.694 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 14:19:56.759 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 14:19:57.155 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 14:19:58.949 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 14:19:58.970 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 14:19:58.984 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 14:19:58.984 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 14:19:58.984 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 14:19:59.003 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 14:19:59.003 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 14:19:59.003 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 14:19:59.004 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 14:19:59.019 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 14:19:59.019 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 14:19:59.019 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 14:19:59.020 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 14:19:59.729 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 14:19:59.740 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 8.792 seconds (process running for 10.471)
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:19:59.743 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 14:19:59.745 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 14:19:59.745 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 14:19:59.746 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:19:59.747 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 14:19:59.979 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 14:19:59.980 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 14:19:59.981 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 14:19:59.982 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 14:19:59.983 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 14:19:59.983 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 14:19:59.984 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 100
2025-08-13 14:19:59.989 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:01.374 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:01.374 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 1: 100 orders, total: 9044
2025-08-13 14:20:01.374 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 2, limit: 100
2025-08-13 14:20:01.374 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:01.841 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:01.842 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 2: 100 orders, total: 9044
2025-08-13 14:20:01.842 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 3, limit: 100
2025-08-13 14:20:01.842 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:02.255 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:02.261 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 3: 100 orders, total: 9044
2025-08-13 14:20:02.262 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 4, limit: 100
2025-08-13 14:20:02.262 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:02.729 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:02.729 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 4: 100 orders, total: 9044
2025-08-13 14:20:02.730 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 5, limit: 100
2025-08-13 14:20:02.730 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:03.476 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:03.477 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 5: 100 orders, total: 9044
2025-08-13 14:20:03.477 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 6, limit: 100
2025-08-13 14:20:03.477 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:04.295 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:04.295 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 6: 100 orders, total: 9044
2025-08-13 14:20:04.295 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 7, limit: 100
2025-08-13 14:20:04.295 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:05.025 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:05.025 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 7: 100 orders, total: 9044
2025-08-13 14:20:05.025 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 8, limit: 100
2025-08-13 14:20:05.026 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:06.060 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:06.060 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 8: 100 orders, total: 9044
2025-08-13 14:20:06.060 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 9, limit: 100
2025-08-13 14:20:06.060 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:07.384 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:07.385 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 9: 100 orders, total: 9044
2025-08-13 14:20:07.385 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 10, limit: 100
2025-08-13 14:20:07.386 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:08.928 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:08.928 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 10: 100 orders, total: 9044
2025-08-13 14:20:08.928 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 11, limit: 100
2025-08-13 14:20:08.928 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:10.292 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:10.292 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 11: 100 orders, total: 9044
2025-08-13 14:20:10.292 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 12, limit: 100
2025-08-13 14:20:10.292 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:11.455 [main] INFO  [c.g.etl.service.FacebookApiService] - Successfully fetched 100 Facebook orders for date: 2025-08-12
2025-08-13 14:20:11.455 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetched page 12: 100 orders, total: 9044
2025-08-13 14:20:11.455 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 13, limit: 100
2025-08-13 14:20:11.455 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:20:12.747 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:20:12.747 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 14:20:13.751 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 5
2025-08-13 14:20:15.310 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 2: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:20:15.311 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 2000ms before retry
2025-08-13 14:20:17.314 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 3 of 5
2025-08-13 14:20:18.492 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 3: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:20:18.492 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 3000ms before retry
2025-08-13 14:20:21.493 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 4 of 5
2025-08-13 14:20:22.971 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 4: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:20:22.971 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 4000ms before retry
2025-08-13 14:20:26.972 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 5 of 5
2025-08-13 14:20:28.372 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 5: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:20:28.373 [main] ERROR [c.g.etl.service.FacebookApiService] - Facebook API call failed after 5 attempts
2025-08-13 14:20:28.373 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch Facebook orders for date 2025-08-12: Facebook API call failed after 5 attempts
2025-08-13 14:20:28.373 [main] ERROR [c.g.etl.service.FacebookApiService] - Failed to fetch all Facebook orders for date 2025-08-12: Facebook API call failed for date: 2025-08-12
2025-08-13 14:20:28.373 [main] ERROR [c.g.etl.service.FacebookEtlService] - Facebook ETL process failed for date 2025-08-12: Failed to fetch all orders
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üì• API Response: 0 total orders
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚úÖ Processed: 0 orders
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üìà Success Rate: 0.0%
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      ‚è±Ô∏è Duration: 28390 ms
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -      üíæ Facebook Result: ‚ùå FAILED
2025-08-13 14:20:28.374 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚úÖ Processed 1 platform(s)
2025-08-13 14:20:28.375 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 3: Database State AFTER
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìà MULTI-PLATFORM TEST RESULTS
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Test Date: 2025-08-12
2025-08-13 14:20:28.522 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform(s): Facebook
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä Database Changes:
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070 ‚Üí 2070 (+0)
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889 ‚Üí 1889 (+0)
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ùå Result: FAILED
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üîß Check configuration and logs above
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üí° To test different configurations:
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìù Edit: src/test/resources/test-config.properties
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üõí Shopee: test.shopee.enabled=true, test.platform=SHOPEE
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üì± TikTok: test.tiktok.enabled=true, test.platform=TIKTOK
2025-08-13 14:20:28.523 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Facebook: test.facebook.enabled=true, test.platform=FACEBOOK
2025-08-13 14:20:28.524 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üåê All: test.platform=ALL (enable all desired platforms)
2025-08-13 14:20:28.524 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    ‚ñ∂Ô∏è  Re-run: ConfigBasedEtlTest
2025-08-13 14:20:28.524 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:20:28.531 [main] INFO  [c.g.e.c.StatusMappingInitializer] - === Initializing Status Mappings ===
2025-08-13 14:20:28.531 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing SHOPEE status mappings...
2025-08-13 14:20:28.875 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ SHOPEE status mappings: 0 created, 10 already existed
2025-08-13 14:20:28.875 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing TIKTOK status mappings...
2025-08-13 14:20:29.169 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ TIKTOK status mappings: 0 created, 10 already existed
2025-08-13 14:20:29.170 [main] INFO  [c.g.e.c.StatusMappingInitializer] - Initializing FACEBOOK status mappings...
2025-08-13 14:20:29.351 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ FACEBOOK status mappings: 0 created, 6 already existed
2025-08-13 14:20:29.351 [main] INFO  [c.g.e.c.StatusMappingInitializer] - ‚úÖ Status mappings initialization completed successfully
2025-08-13 14:20:29.379 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 14:20:29.380 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üéâ SHOPEE ETL APPLICATION STARTED SUCCESSFULLY üéâ
2025-08-13 14:20:29.380 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 14:20:29.380 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application: shopee-etl-test
2025-08-13 14:20:29.380 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Profile: test
2025-08-13 14:20:29.381 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Java Version: 21.0.7
2025-08-13 14:20:29.382 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Spring Boot Version: 3.2.0
2025-08-13 14:20:29.382 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.382 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìã Configuration Summary:
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database URL: jdbc:postgresql://103.97.125.92:5432/guno_db_test?useSSL=false
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Database User: guno_user
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API URL: Not configured
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Timeout: Not configured
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - API Page Size: Not configured
2025-08-13 14:20:29.383 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Enabled: false
2025-08-13 14:20:29.384 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Scheduler Rate: 10000 ms
2025-08-13 14:20:29.384 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log Level: INFO
2025-08-13 14:20:29.384 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Log File: logs/shopee-etl-production.log
2025-08-13 14:20:29.384 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.384 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üåê Access Information:
2025-08-13 14:20:29.385 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ----------------------------------------
2025-08-13 14:20:29.387 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Server Port: 8080
2025-08-13 14:20:29.387 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Local Access: http://localhost:8080
2025-08-13 14:20:29.387 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Network Access: http://127.0.0.1:8080
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üìö API Documentation:
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Help: http://localhost:8080/api/etl/help
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Status: http://localhost:8080/api/etl/status
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Test API: http://localhost:8080/api/etl/api-test
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Manual ETL: POST http://localhost:8080/api/etl/trigger
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üîß Management Endpoints:
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Health Check: http://localhost:8080/actuator/health
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - Application Info: http://localhost:8080/actuator/info
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö° ETL Operations:
2025-08-13 14:20:29.388 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ‚ö†Ô∏è Automated ETL: DISABLED
2025-08-13 14:20:29.389 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üí° Use POST /api/etl/trigger for manual processing
2025-08-13 14:20:29.389 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - 
2025-08-13 14:20:29.389 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 14:20:29.389 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - üöÄ Ready to process Shopee orders!
2025-08-13 14:20:29.389 [main] INFO  [com.guno.etl.ShopeeEtlApplication] - ============================================================
2025-08-13 14:23:51.917 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Starting ConfigBasedEtlTest using Java 21.0.7 with PID 10042 (/Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test/target/test-classes started by nhokluvavie in /Users/nhokluvavie/IdeaProjects/Guno/push-order-data-test)
2025-08-13 14:23:51.919 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - The following 1 profile is active: "test"
2025-08-13 14:23:52.614 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-13 14:23:52.868 [main] INFO  [o.s.d.r.c.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 245 ms. Found 11 JPA repository interfaces.
2025-08-13 14:23:53.841 [main] INFO  [o.h.jpa.internal.util.LogHelper] - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-13 14:23:53.903 [main] INFO  [org.hibernate.Version] - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-08-13 14:23:53.943 [main] INFO  [o.h.c.i.RegionFactoryInitiator] - HHH000026: Second-level cache disabled
2025-08-13 14:23:54.236 [main] INFO  [o.s.o.j.p.SpringPersistenceUnitInfo] - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-13 14:23:54.263 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Starting...
2025-08-13 14:23:54.748 [main] INFO  [com.zaxxer.hikari.pool.HikariPool] - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7bede4ea
2025-08-13 14:23:54.749 [main] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Start completed.
2025-08-13 14:23:54.832 [main] WARN  [org.hibernate.orm.deprecation] - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-13 14:23:56.408 [main] INFO  [o.h.e.t.j.p.i.JtaPlatformInitiator] - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-13 14:23:56.411 [main] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 14:23:56.469 [main] INFO  [c.guno.etl.service.ShopeeApiService] - ShopeeApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/shopee
2025-08-13 14:23:56.771 [main] INFO  [o.s.d.j.r.query.QueryEnhancerFactory] - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-13 14:23:58.463 [main] INFO  [c.guno.etl.service.TikTokApiService] - TikTokApiService initialized with base URL: https://n8n.guno.club/webhook/ddaece67-7b38-4c3d-a31d-d50c9cfd89c8/hub-data/orders/tiktok
2025-08-13 14:23:58.478 [main] INFO  [c.g.etl.service.FacebookApiService] - FacebookApiService initialized with base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 14:23:58.488 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Database configuration initialized
2025-08-13 14:23:58.489 [main] INFO  [com.guno.etl.config.DatabaseConfig] - JPA repositories enabled for package: com.guno.etl.repository
2025-08-13 14:23:58.489 [main] INFO  [com.guno.etl.config.DatabaseConfig] - Entity scan enabled for package: com.guno.etl.entity
2025-08-13 14:23:58.505 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - FacebookApiDebugTool initialized
2025-08-13 14:23:58.505 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Base URL: https://hub-bak.guno.store/api/v1/pos/pos-pancake-fm/order/search
2025-08-13 14:23:58.505 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - Auth Header: x-webhook-api-key
2025-08-13 14:23:58.505 [main] INFO  [c.g.etl.debug.FacebookApiDebugTool] - API Key: ***configured***
2025-08-13 14:23:58.516 [main] INFO  [c.guno.etl.config.SchedulingConfig] - ETL Task Scheduler configured:
2025-08-13 14:23:58.516 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Pool Size: 2
2025-08-13 14:23:58.516 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Thread Name Prefix: ETL-Scheduler-
2025-08-13 14:23:58.517 [main] INFO  [c.guno.etl.config.SchedulingConfig] -   Await Termination: 20 seconds
2025-08-13 14:23:59.285 [main] INFO  [o.s.b.w.e.netty.NettyWebServer] - Netty started on port 8080
2025-08-13 14:23:59.293 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - Started ConfigBasedEtlTest in 8.077 seconds (process running for 9.403)
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÅ CONFIG-BASED ETL TEST (Multi-Platform)
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîß Edit: src/test/resources/test-config.properties
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ‚ñ∂Ô∏è  Run: ConfigBasedEtlTest from IDE
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Supports: Shopee + TikTok + Facebook
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:23:59.295 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìã Loading Configuration...
2025-08-13 14:23:59.297 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìÖ Target Date: 2025-08-12
2025-08-13 14:23:59.297 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üè™ Platform: FACEBOOK
2025-08-13 14:23:59.297 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üõí Shopee Enabled: false
2025-08-13 14:23:59.297 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üì± TikTok Enabled: false
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìò Facebook Enabled: true
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üß™ Test Mode: SINGLE_DATE
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üêõ Debug Mode: true
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üöÄ Starting Multi-Platform ETL Test
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - ========================================
2025-08-13 14:23:59.298 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üìä STEP 1: Database State BEFORE
2025-08-13 14:23:59.539 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Orders: 2070
2025-08-13 14:23:59.539 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    Customers: 1889
2025-08-13 14:23:59.539 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] - üîÑ STEP 2: Processing Data for 2025-08-12
2025-08-13 14:23:59.539 [main] INFO  [c.g.e.integration.ConfigBasedEtlTest] -    üìò Processing Facebook Data...
2025-08-13 14:23:59.540 [main] INFO  [c.g.etl.service.FacebookEtlService] - Starting Facebook ETL process for date: 2025-08-12
2025-08-13 14:23:59.540 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching ALL Facebook orders for date: 2025-08-12
2025-08-13 14:23:59.540 [main] INFO  [c.g.etl.service.FacebookApiService] - Fetching Facebook orders for date: 2025-08-12, page: 1, limit: 10000
2025-08-13 14:23:59.545 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 1 of 5
2025-08-13 14:25:14.478 [main] WARN  [c.g.etl.service.FacebookApiService] - Facebook API unexpected error on attempt 1: Error while extracting response for type [class com.guno.etl.dto.FacebookApiResponse] and content type [application/json;charset=utf-8]
2025-08-13 14:25:14.484 [main] DEBUG [c.g.etl.service.FacebookApiService] - Waiting 1000ms before retry
2025-08-13 14:25:15.488 [main] DEBUG [c.g.etl.service.FacebookApiService] - Facebook API call attempt 2 of 5
2025-08-13 14:25:19.226 [SpringApplicationShutdownHook] INFO  [o.s.o.j.LocalContainerEntityManagerFactoryBean] - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-13 14:25:19.235 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown initiated...
2025-08-13 14:25:19.236 [SpringApplicationShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] - HikariPool-1 - Shutdown completed.
